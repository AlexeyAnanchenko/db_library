# db_library
Проектирование, создание, наполнение базы данных, а так же формирование запросов к ней в рамках курса "Инженер данных"

В рамках данного проекта спроектирована реляционная база данных "Библиотека", созданы скрипты для создания таблиц, наполнения базы данных и выполнения запросов к ней. Дополнительно добавлен файл docker-compose для автоматического разворачивания БД в контейнере PostgreSQL. Запросы так же выполняются атоматически - их исполнение можно посмотреть в файлах логов контейнера.

## Как развернуть проект?

Для просмотра проекта достаточно склонировать его себе на локальный компьютер, иметь установленным docker-compose и ввести команду:

```sh
docker-compose up -d
```

Далее база данных доступна в контейнере, либо по порту 5432 из любого сервиса для подключения к БД (например, DBeaver)

## Порядок выполнения проекта:

1. Сначала были выделены следующие основные сущности: 
 - Читатели
 - Книги
 - Издательства
 - Города
 - Авторы
   
Помимо этого необходимо было определить сущности-связки для построения взаимодействия таблиц:
 - Читатели_Книги
 - Книги_Авторы
 - Издательства_Города
 - Потерянные книги

2. Далее определены связи между таблицами
 - Читатели и Книги - многие ко многим, т.к. Читатель может взять несколько книг, а книгу может взять несколько читателей (реализовано посредством сущности-связки Читатели_Книги, где связи один (Читатели или Книги) ко многим (Читатели_Книги)). Тоже самое касается и сущности Потерянные книги.
 - Книги и Авторы - многие ко кмногим, т.к. у Книги может быть несколько Авторов, а у Автора может быть несколько Книг (реализовано посредством сущности-связки Книги_Авторы, где связи один(Авторы или Книги) ко многим(Книги_Авторы))
 - Издательства и Книги - один ко многим, т.к. у Издательства может быть несколько опубликованных книг, но у книги конкретное издательство.
 - Издательства и Города - многие ко кмногим, т.к. Издательство может иметь несколько филиалов в разных Городах, а в одном Городе может быть несколько Издательств (реализовано посредством сущности-связки Издательства_Города, где связи один(Издательства или Города) ко многим(Издательства_Города))

3. Определены ключи по сущностям:
- Читатели: поле Номер Билета - первичный ключ
- Книги: поле Шифр книги - первичный ключ, id_издательства - внешний ключ к таблице "Издательства"
- Читатели_Книги: поле Номер билета читателя - внешний ключ к таблице "Читатели", поле Шифр Книги - внешний ключ к таблице "Книги", оба этих поля составной первичный ключ таблицы.
- Авторы: id_автора - первичный ключ
- Книги_Авторы: поле Шифр_книги - внешний ключ к таблице "Книги", поле id_автора - внешний ключ к таблице "Авторы", оба этих поля составной первичный ключ таблицы.
- Издательства: поле id_издательства - первичный ключ
- Города: поле id_города - первичный ключ
- Издательства_Города: поле id_издательства - внешний ключ к таблице "Издательства", поле id_города - внешний ключ к таблице "Города", оба этих поля составной первичный ключ таблицы.

4. Составлена физическая модель на ER-диаграмме по ссылке: (<code>[./ER-diagram.png](https://github.com/AlexeyAnanchenko/db_library/blob/main/ER-diagram.jpg)</code>)

5. Сформированы срипты для создания, наполнения, и формирования запросов к БД:

- Скрипт DDL по созданию БД находиться по ссылке: (<code>[./scripts_db/DDL/init.sql](https://github.com/AlexeyAnanchenko/db_library/blob/main/scripts_db/DDL/init.sql)</code>)

- Скрипт DML c загрузкой данных в БД представлен в файле по пути: (<code>[./scripts_db/DML/load_data.sql](https://github.com/AlexeyAnanchenko/db_library/blob/main/scripts_db/DML/load_data.sql)</code>)

- Скрипт DML c различными запросами к БД представлен в файле по пути: (<code>[./scripts_db/DML/queries.sql](https://github.com/AlexeyAnanchenko/db_library/blob/main/scripts_db/DML/queries.sql)</code>)

6. Создан файл docker-compose для автоматического разворачивания БД в контейнере. (<code>[./docker-compose.yml](https://github.com/AlexeyAnanchenko/db_library/blob/main/docker-compose.yml)</code>)
